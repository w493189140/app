<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <script src="../lib/flexible.js"></script>
    <script src="../lib/flexible_css.js"></script>
    <title>系统消息</title>
    <link rel="stylesheet" href="../css/base.css"/>
    <link rel="stylesheet" href="../css/mui.min.css" />
    <link rel="stylesheet" href="../css/news.css"/>
</head>

<body>
<div class="layout">
    <!--头部部分-->
    <header id="topFixed">
        <a href="javascript:history.go(-1)" class="iconfont icon_right_arrow">返回</a>
        <div class="h3">系统消息</div>
    </header>
    <div id="topZhan" class="top_zhanwei"></div>
    <div class="tab_content">
        <div class="all-list" style="display: none">
            <!-- 无订单渲染empty-->
            <div class="empty" style="display: block;">
                <img src="../images/empty.png"/>
                <p>暂无重要公告</p>
            </div>
        </div>
        <div id="pullrefresh" style="display: block" class="mui-content mui-scroll-wrapper pending-list claer_top">
            <ul style="display: block" class="mui-scroll mui-scroll">
                <li class="line-wrapper">
                    <div class="line-scroll-wrapper clearfix">
                        <div class="item line-normal-wrapper f_left">
                            <a href="#">
                            <div class="content clearfix">
                                <div class="img_box ico_boxc f_left">
                                    <span class="iconfont">&#xe6cb;</span>
                                </div>
                                <div class="text  f_right">
                                    <div class="title"><span>本期股票池更新</span><em>2017-01-17</em></div>
                                    <p class="teacher">
                                        小蜂会员您好，您购买的《解密龙虎榜》初级课程订单已成功支付成功...
                                    </p>
                                </div>
                            </div>
                            </a>
                        </div>
                        <div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>
                    </div>
                </li>
                <li class="line-wrapper">
                    <div class="line-scroll-wrapper clearfix">
                        <div class="item line-normal-wrapper f_left">
                            <a href="#">
                                <div class="content clearfix">
                                    <div class="img_box ico_boxb f_left">
                                        <span class="iconfont">&#xe6ef;</span>
                                        <i>2</i>
                                    </div>
                                    <div class="text  f_right">
                                        <div class="title"><span>开课提醒</span><em>2017-01-17</em></div>
                                        <p class="teacher">
                                            别问这是什么类型的消息归档，我也不知道这是什么类别的，点击详情咨询产品经理，谢谢。
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>
                    </div>
                </li>
                <li class="line-wrapper">
                    <div class="line-scroll-wrapper clearfix">
                        <div class="item line-normal-wrapper f_left">
                            <a href="#">
                                <div class="content clearfix">
                                    <div class="img_box ico_boxb f_left">
                                        <span class="iconfont">&#xe6ef;</span>
                                        <i>2</i>
                                    </div>
                                    <div class="text  f_right">
                                        <div class="title"><span>课程变更通知</span><em>2017-01-17</em></div>
                                        <p class="teacher">
                                            别问这是什么类型的消息归档，我也不知道这是什么类别的，点击详情咨询产品经理，谢谢。
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>
                    </div>
                </li>
                <li class="line-wrapper">
                    <div class="line-scroll-wrapper clearfix">
                        <div class="item line-normal-wrapper f_left">
                            <a href="#">
                                <div class="content clearfix">
                                    <div class="img_box ico_boxa f_left">
                                        <span class="iconfont">&#xe6cb;</span>
                                    </div>
                                    <div class="text  f_right">
                                        <div class="title"><span>紧急通知</span><em>2017-01-17</em></div>
                                        <p class="teacher">
                                            您预约的《解密龙虎榜》直播课程马上就要开课了，请在直播中进行观看。
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>
                    </div>
                </li>
                <li class="line-wrapper">
                    <div class="line-scroll-wrapper clearfix">
                        <div class="item line-normal-wrapper f_left">
                            <a href="#">
                                <div class="content clearfix">
                                    <div class="img_box ico_boxa f_left">
                                        <span class="iconfont">&#xe6cb;</span>
                                    </div>
                                    <div class="text  f_right">
                                        <div class="title"><span>系统消息</span><em>2017-01-17</em></div>
                                        <p class="teacher">
                                            您预约的《解密龙虎榜》直播课程马上就要开课了，请在直播中进行观看。
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>
                    </div>
                </li>
                <li class="line-wrapper">
                    <div class="line-scroll-wrapper clearfix">
                        <div class="item line-normal-wrapper f_left">
                            <a href="#">
                                <div class="content clearfix">
                                    <div class="img_box ico_boxa f_left">
                                        <span class="iconfont">&#xe6cb;</span>
                                    </div>
                                    <div class="text  f_right">
                                        <div class="title"><span>开课提醒</span><em>2017-01-17</em></div>
                                        <p class="teacher">
                                            您预约的《解密龙虎榜》直播课程马上就要开课了，请在直播中进行观看。
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>
                    </div>
                </li>
                <div class="mui-table-view mui-table-view-chevron"></div>
            </ul>
        </div>
    </div>
</div>
<script src="../js/isWeiXin.js"></script>
<script src="../lib/jquery-2.1.1.min.js"></script>
<script src="../js/mui.min.js"></script>
<script src="../js/order.js"></script>
<script type="text/javascript">
    if(isWeiXin()){
     $("#pullrefresh").removeClass("claer_top")
    }
</script>
<script type="text/javascript">
    (function(){
//上拉加载下拉刷新
        mui.init({
            pullRefresh: {
                container: '#pullrefresh',
                up: {
                    contentrefresh: '正在加载...',
                    callback: pullupRefresh
                }
            }
        });
//加载更多
        var dataNum=30;//获取数据总数
        var pageSize=5;//每页显示条数
        var counter=1;//计数器
        var pageStart=0;//开始数据条数
        getData(pageStart,pageSize);
        function getData(pageStart,pageSize){
//显示数不足每页显示条数
            if(dataNum-pageStart<pageSize){
                pageSize=dataNum-pageStart;
                data(pageStart,pageSize);
                console.log("显示数不足每页显示条数");
            }
//显示隐藏加载更多
            else if(pageStart+pageSize>=dataNum){
                data(pageStart,pageSize);
                console.log("没有更多数据了");
//没有更多数据了
            }else{
                data(pageStart,pageSize);
                console.log("显示dataNum"+dataNum+"pageSize"+pageSize+"pageStart"+pageStart);
//显示
            }
        }
        function data(pageStart,pageSize){
//业务
            var result="";
            for(var i=pageStart;i<(pageStart+pageSize);i++){
                result+= '<li class="line-wrapper">'+
                '<div class="line-scroll-wrapper clearfix">'+
                '<div class="item line-normal-wrapper f_left">'+
                '<a href="#">'+
                '<div class="content clearfix">'+
                '<div class="img_box ico_boxa f_left">'+
                '<span class="iconfont">&#xe6cb;</span>'+
                '</div>'+
                '<div class="text  f_right">'+
                '<div class="title"><span>开课提醒</span><em>2017-01-17</em></div>'+
                '<p class="teacher">'+
                '您预约的《解密龙虎榜》直播课程马上就要开课了，请在直播中进行观看。'+
                '</p>'+
                '</div>'+
                '</div>'+
                '</a>'+
                '</div>'+
                '<div class="line-btn-delete f_left"><button class="icon_delete">删除</button></div>'+
                '</div>'+
                '</li>'
            }
            console.log(jQuery);
            jQuery(result).insertBefore('#pullrefresh .mui-scroll .mui-table-view');
        }
        /**
         * 上拉加载具体业务实现
         */
        function pullupRefresh() {
            setTimeout(function() {
                var flag=counter++<(dataNum/pageSize)
                console.log(dataNum/pageSize);
                mui('#pullrefresh').pullRefresh().endPullupToRefresh((!flag)); //参数为true代表没有更多数据了。
                var scroll = document.body.querySelector('.mui-scroll .mui-table-view');
                var item = document.body.querySelectorAll('.goode-msg');
                console.log(counter);
                if(flag){
                    console.log(counter);
                    pageStart=counter*pageSize;
                    data(pageStart,pageSize);
                }
            }, 1500);
        }
        sessionStorage.setItem("str", "html");
        var aa =  sessionStorage.getItem("str");
        console.log(aa);
        console.log(document.referrer);
    })();
</script>
</body>
</html>